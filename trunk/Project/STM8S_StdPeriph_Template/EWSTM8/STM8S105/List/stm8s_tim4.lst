###############################################################################
#                                                                             #
# IAR C/C++ Compiler V1.30.1.50036 for STM8             12/Jul/2013  14:33:07 #
# Copyright 2010-2011 IAR Systems AB.                                         #
#                                                                             #
#    Source file  =  C:\Documents and Settings\Administrator\Desktop\stm8s105 #
#                    k-controller\Libraries\STM8S_StdPeriph_Driver\src\stm8s_ #
#                    tim4.c                                                   #
#    Command line =  "C:\Documents and Settings\Administrator\Desktop\stm8s10 #
#                    5k-controller\Libraries\STM8S_StdPeriph_Driver\src\stm8s #
#                    _tim4.c" -e -Ohz --debug --code_model medium             #
#                    --data_model medium -o "C:\Documents and                 #
#                    Settings\Administrator\Desktop\stm8s105k-controller\Proj #
#                    ect\STM8S_StdPeriph_Template\EWSTM8\STM8S105\Obj\"       #
#                    --dlib_config "C:\Program Files\IAR Systems\Embedded     #
#                    Workbench 6.0\stm8\LIB\dlstm8mmf.h" -D STM8S105 -lC      #
#                    "C:\Documents and Settings\Administrator\Desktop\stm8s10 #
#                    5k-controller\Project\STM8S_StdPeriph_Template\EWSTM8\ST #
#                    M8S105\List\" -lA "C:\Documents and                      #
#                    Settings\Administrator\Desktop\stm8s105k-controller\Proj #
#                    ect\STM8S_StdPeriph_Template\EWSTM8\STM8S105\List\" -I   #
#                    "C:\Documents and Settings\Administrator\Desktop\stm8s10 #
#                    5k-controller\Project\STM8S_StdPeriph_Template\EWSTM8\.. #
#                    \" -I "C:\Documents and Settings\Administrator\Desktop\s #
#                    tm8s105k-controller\Project\STM8S_StdPeriph_Template\EWS #
#                    TM8\..\..\..\Libraries\STM8S_StdPeriph_Driver\inc\"      #
#                    --vregs 16                                               #
#    List file    =  C:\Documents and Settings\Administrator\Desktop\stm8s105 #
#                    k-controller\Project\STM8S_StdPeriph_Template\EWSTM8\STM #
#                    8S105\List\stm8s_tim4.lst                                #
#    Object file  =  C:\Documents and Settings\Administrator\Desktop\stm8s105 #
#                    k-controller\Project\STM8S_StdPeriph_Template\EWSTM8\STM #
#                    8S105\Obj\stm8s_tim4.o                                   #
#                                                                             #
#                                                                             #
###############################################################################

C:\Documents and Settings\Administrator\Desktop\stm8s105k-controller\Libraries\STM8S_StdPeriph_Driver\src\stm8s_tim4.c
      1          /**
      2            ******************************************************************************
      3            * @file    stm8s_tim4.c
      4            * @author  MCD Application Team
      5            * @version V2.1.0
      6            * @date    18-November-2011
      7            * @brief   This file contains all the functions for the TIM4 peripheral.
      8            ******************************************************************************
      9            * @attention
     10            *
     11            * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
     12            * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE
     13            * TIME. AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY
     14            * DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING
     15            * FROM THE CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE
     16            * CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
     17            *
     18            * <h2><center>&copy; COPYRIGHT 2011 STMicroelectronics</center></h2>
     19            ******************************************************************************
     20            */
     21          
     22          /* Includes ------------------------------------------------------------------*/
     23          #include "stm8s_tim4.h"
     24          
     25          /** @addtogroup STM8S_StdPeriph_Driver
     26            * @{
     27            */
     28          /* Private typedef -----------------------------------------------------------*/
     29          /* Private define ------------------------------------------------------------*/
     30          /* Private macro -------------------------------------------------------------*/
     31          /* Private variables ---------------------------------------------------------*/
     32          /* Private function prototypes -----------------------------------------------*/
     33          /**
     34            * @addtogroup TIM4_Public_Functions
     35            * @{
     36            */
     37          
     38          /**
     39            * @brief  Deinitializes the TIM4 peripheral registers to their default reset values.
     40            * @param  None
     41            * @retval None
     42            */

   \                                 In section .far_func.text, align 1
     43          void TIM4_DeInit(void)
     44          {
     45              TIM4->CR1 = TIM4_CR1_RESET_VALUE;
   \                     TIM4_DeInit:
   \   000000 725F5340              CLR       L:0x5340
     46              TIM4->IER = TIM4_IER_RESET_VALUE;
   \   000004 725F5341              CLR       L:0x5341
     47              TIM4->CNTR = TIM4_CNTR_RESET_VALUE;
   \   000008 725F5344              CLR       L:0x5344
     48              TIM4->PSCR = TIM4_PSCR_RESET_VALUE;
   \   00000C 725F5345              CLR       L:0x5345
     49              TIM4->ARR = TIM4_ARR_RESET_VALUE;
   \   000010 35FF5346              MOV       L:0x5346, #0xff
     50              TIM4->SR1 = TIM4_SR1_RESET_VALUE;
   \   000014 725F5342              CLR       L:0x5342
     51          }
   \   000018 87                    RETF
     52          
     53          /**
     54            * @brief  Initializes the TIM4 Time Base Unit according to the specified parameters.
     55            * @param    TIM4_Prescaler specifies the Prescaler from TIM4_Prescaler_TypeDef.
     56            * @param    TIM4_Period specifies the Period value.
     57            * @retval None
     58            */

   \                                 In section .far_func.text, align 1
   \                     ?Subroutine0:
   \   000000 BF00                  LDW       S:?w1, X
   \   000002 5F                    CLRW      X
   \   000003 BF00                  LDW       S:?w0, X
   \   000005 AE0000                LDW       X, #`?<Constant "C:\\\\Documents and Sett...">`
   \   000008 AC000000              JPF       assert_failed

   \                                 In section .far_func.text, align 1
     59          void TIM4_TimeBaseInit(TIM4_Prescaler_TypeDef TIM4_Prescaler, uint8_t TIM4_Period)
     60          {
   \                     TIM4_TimeBaseInit:
   \   000000 8D000000              CALLF     L:?push_w4
   \   000004 B700                  LD        S:?b9, A
   \   000006 450000                MOV       S:?b8, S:?b0
     61              /* Check TIM4 prescaler value */
     62              assert_param(IS_TIM4_PRESCALER_OK(TIM4_Prescaler));
   \   000009 2723                  JREQ      L:??CrossCallReturnLabel_0
   \   00000B A101                  CP        A, #0x1
   \   00000D 271F                  JREQ      L:??CrossCallReturnLabel_0
   \   00000F A102                  CP        A, #0x2
   \   000011 271B                  JREQ      L:??CrossCallReturnLabel_0
   \   000013 A103                  CP        A, #0x3
   \   000015 2717                  JREQ      L:??CrossCallReturnLabel_0
   \   000017 A104                  CP        A, #0x4
   \   000019 2713                  JREQ      L:??CrossCallReturnLabel_0
   \   00001B A105                  CP        A, #0x5
   \   00001D 270F                  JREQ      L:??CrossCallReturnLabel_0
   \   00001F A106                  CP        A, #0x6
   \   000021 270B                  JREQ      L:??CrossCallReturnLabel_0
   \   000023 A107                  CP        A, #0x7
   \   000025 2707                  JREQ      L:??CrossCallReturnLabel_0
   \   000027 AE003E                LDW       X, #0x3e
   \   00002A 8D000000              CALLF     ?Subroutine0
     63              /* Set the Prescaler value */
     64              TIM4->PSCR = (uint8_t)(TIM4_Prescaler);
   \                     ??CrossCallReturnLabel_0:
   \   00002E B600                  LD        A, S:?b9
   \   000030 C75345                LD        L:0x5345, A
     65              /* Set the Autoreload value */
     66              TIM4->ARR = (uint8_t)(TIM4_Period);
   \   000033 B600                  LD        A, S:?b8
   \   000035 C75346                LD        L:0x5346, A
     67          }
   \   000038 AC000000              JPF       L:?epilogue_w4
     68          
     69          
     70          
     71          /**
     72            * @brief  Enables or disables the TIM4 peripheral.
     73            * @param   NewState new state of the TIM4 peripheral. This parameter can
     74            * be ENABLE or DISABLE.
     75            * @retval None
     76            */

   \                                 In section .far_func.text, align 1
     77          void TIM4_Cmd(FunctionalState NewState)
     78          {
     79              /* Check the parameters */
     80              assert_param(IS_FUNCTIONALSTATE_OK(NewState));
   \                     TIM4_Cmd:
   \   000000 4D                    TNZ       A
   \   000001 2710                  JREQ      L:??TIM4_Cmd_0
   \   000003 A101                  CP        A, #0x1
   \   000005 2707                  JREQ      L:??CrossCallReturnLabel_1
   \   000007 AE0050                LDW       X, #0x50
   \   00000A 8D000000              CALLF     ?Subroutine0
     81          
     82              /* set or Reset the CEN Bit */
     83              if (NewState != DISABLE)
     84              {
     85                  TIM4->CR1 |= TIM4_CR1_CEN;
   \                     ??CrossCallReturnLabel_1:
   \   00000E 72105340              BSET      L:0x5340, #0x0
   \   000012 87                    RETF
     86              }
     87              else
     88              {
     89                  TIM4->CR1 &= (uint8_t)(~TIM4_CR1_CEN);
   \                     ??TIM4_Cmd_0:
   \   000013 72115340              BRES      L:0x5340, #0x0
     90              }
     91          }
   \   000017 87                    RETF
     92          
     93          /**
     94            * @brief  Enables or disables the specified TIM4 interrupts.
     95            * @param   NewState new state of the TIM4 peripheral.
     96            * This parameter can be: ENABLE or DISABLE.
     97            * @param   TIM4_IT specifies the TIM4 interrupts sources to be enabled or disabled.
     98            * This parameter can be any combination of the following values:
     99            * - TIM4_IT_UPDATE: TIM4 update Interrupt source
    100            * @param   NewState new state of the TIM4 peripheral.
    101            * @retval None
    102            */

   \                                 In section .far_func.text, align 1
    103          void TIM4_ITConfig(TIM4_IT_TypeDef TIM4_IT, FunctionalState NewState)
    104          {
   \                     TIM4_ITConfig:
   \   000000 8D000000              CALLF     L:?push_w4
   \   000004 B700                  LD        S:?b8, A
   \   000006 450000                MOV       S:?b9, S:?b0
    105              /* Check the parameters */
    106              assert_param(IS_TIM4_IT_OK(TIM4_IT));
   \   000009 A101                  CP        A, #0x1
   \   00000B 2707                  JREQ      L:??CrossCallReturnLabel_3
   \   00000D AE006A                LDW       X, #0x6a
   \   000010 8D000000              CALLF     ?Subroutine0
    107              assert_param(IS_FUNCTIONALSTATE_OK(NewState));
   \                     ??CrossCallReturnLabel_3:
   \   000014 3D00                  TNZ       S:?b9
   \   000016 2714                  JREQ      L:??TIM4_ITConfig_0
   \   000018 B600                  LD        A, S:?b9
   \   00001A A101                  CP        A, #0x1
   \   00001C 2707                  JREQ      L:??CrossCallReturnLabel_2
   \   00001E AE006B                LDW       X, #0x6b
   \   000021 8D000000              CALLF     ?Subroutine0
    108          
    109              if (NewState != DISABLE)
    110              {
    111                  /* Enable the Interrupt sources */
    112                  TIM4->IER |= (uint8_t)TIM4_IT;
   \                     ??CrossCallReturnLabel_2:
   \   000025 B600                  LD        A, S:?b8
   \   000027 CA5341                OR        A, L:0x5341
   \   00002A 2007                  JRA       ??TIM4_ITConfig_1
    113              }
    114              else
    115              {
    116                  /* Disable the Interrupt sources */
    117                  TIM4->IER &= (uint8_t)(~TIM4_IT);
   \                     ??TIM4_ITConfig_0:
   \   00002C 3300                  CPL       S:?b8
   \   00002E B600                  LD        A, S:?b8
   \   000030 C45341                AND       A, L:0x5341
   \                     ??TIM4_ITConfig_1:
   \   000033 C75341                LD        L:0x5341, A
    118              }
    119          }
   \   000036 AC000000              JPF       L:?epilogue_w4
    120          
    121          /**
    122            * @brief  Enables or Disables the TIM4 Update event.
    123            * @param   NewState new state of the TIM4 peripheral Preload register. This parameter can
    124            * be ENABLE or DISABLE.
    125            * @retval None
    126            */

   \                                 In section .far_func.text, align 1
    127          void TIM4_UpdateDisableConfig(FunctionalState NewState)
    128          {
    129              /* Check the parameters */
    130              assert_param(IS_FUNCTIONALSTATE_OK(NewState));
   \                     TIM4_UpdateDisableConfig:
   \   000000 4D                    TNZ       A
   \   000001 2710                  JREQ      L:??TIM4_UpdateDisableConfig_0
   \   000003 A101                  CP        A, #0x1
   \   000005 2707                  JREQ      L:??CrossCallReturnLabel_4
   \   000007 AE0082                LDW       X, #0x82
   \   00000A 8D000000              CALLF     ?Subroutine0
    131          
    132              /* Set or Reset the UDIS Bit */
    133              if (NewState != DISABLE)
    134              {
    135                  TIM4->CR1 |= TIM4_CR1_UDIS;
   \                     ??CrossCallReturnLabel_4:
   \   00000E 72125340              BSET      L:0x5340, #0x1
   \   000012 87                    RETF
    136              }
    137              else
    138              {
    139                  TIM4->CR1 &= (uint8_t)(~TIM4_CR1_UDIS);
   \                     ??TIM4_UpdateDisableConfig_0:
   \   000013 72135340              BRES      L:0x5340, #0x1
    140              }
    141          }
   \   000017 87                    RETF
    142          
    143          /**
    144            * @brief  Selects the TIM4 Update Request Interrupt source.
    145            * @param   TIM4_UpdateSource specifies the Update source.
    146            * This parameter can be one of the following values
    147            *                       - TIM4_UPDATESOURCE_REGULAR
    148            *                       - TIM4_UPDATESOURCE_GLOBAL
    149            * @retval None
    150            */

   \                                 In section .far_func.text, align 1
    151          void TIM4_UpdateRequestConfig(TIM4_UpdateSource_TypeDef TIM4_UpdateSource)
    152          {
    153              /* Check the parameters */
    154              assert_param(IS_TIM4_UPDATE_SOURCE_OK(TIM4_UpdateSource));
   \                     TIM4_UpdateRequestConfig:
   \   000000 4D                    TNZ       A
   \   000001 2710                  JREQ      L:??TIM4_UpdateRequestConfig_0
   \   000003 A101                  CP        A, #0x1
   \   000005 2707                  JREQ      L:??CrossCallReturnLabel_5
   \   000007 AE009A                LDW       X, #0x9a
   \   00000A 8D000000              CALLF     ?Subroutine0
    155          
    156              /* Set or Reset the URS Bit */
    157              if (TIM4_UpdateSource != TIM4_UPDATESOURCE_GLOBAL)
    158              {
    159                  TIM4->CR1 |= TIM4_CR1_URS;
   \                     ??CrossCallReturnLabel_5:
   \   00000E 72145340              BSET      L:0x5340, #0x2
   \   000012 87                    RETF
    160              }
    161              else
    162              {
    163                  TIM4->CR1 &= (uint8_t)(~TIM4_CR1_URS);
   \                     ??TIM4_UpdateRequestConfig_0:
   \   000013 72155340              BRES      L:0x5340, #0x2
    164              }
    165          }
   \   000017 87                    RETF
    166          
    167          /**
    168            * @brief  Selects the TIM4’s One Pulse Mode.
    169            * @param   TIM4_OPMode specifies the OPM Mode to be used.
    170            * This parameter can be one of the following values
    171            *                    - TIM4_OPMODE_SINGLE
    172            *                    - TIM4_OPMODE_REPETITIVE
    173            * @retval None
    174            */

   \                                 In section .far_func.text, align 1
    175          void TIM4_SelectOnePulseMode(TIM4_OPMode_TypeDef TIM4_OPMode)
    176          {
    177              /* Check the parameters */
    178              assert_param(IS_TIM4_OPM_MODE_OK(TIM4_OPMode));
   \                     TIM4_SelectOnePulseMode:
   \   000000 A101                  CP        A, #0x1
   \   000002 270A                  JREQ      L:??CrossCallReturnLabel_6
   \   000004 4D                    TNZ       A
   \   000005 270C                  JREQ      L:??TIM4_SelectOnePulseMode_0
   \   000007 AE00B2                LDW       X, #0xb2
   \   00000A 8D000000              CALLF     ?Subroutine0
    179          
    180              /* Set or Reset the OPM Bit */
    181              if (TIM4_OPMode != TIM4_OPMODE_REPETITIVE)
    182              {
    183                  TIM4->CR1 |= TIM4_CR1_OPM;
   \                     ??CrossCallReturnLabel_6:
   \   00000E 72165340              BSET      L:0x5340, #0x3
   \   000012 87                    RETF
    184              }
    185              else
    186              {
    187                  TIM4->CR1 &= (uint8_t)(~TIM4_CR1_OPM);
   \                     ??TIM4_SelectOnePulseMode_0:
   \   000013 72175340              BRES      L:0x5340, #0x3
    188              }
    189          
    190          }
   \   000017 87                    RETF
    191          
    192          /**
    193            * @brief  Configures the TIM4 Prescaler.
    194            * @param   Prescaler specifies the Prescaler Register value
    195            * This parameter can be one of the following values
    196            *                       -  TIM4_PRESCALER_1
    197            *                       -  TIM4_PRESCALER_2
    198            *                       -  TIM4_PRESCALER_4
    199            *                       -  TIM4_PRESCALER_8
    200            *                       -  TIM4_PRESCALER_16
    201            *                       -  TIM4_PRESCALER_32
    202            *                       -  TIM4_PRESCALER_64
    203            *                       -  TIM4_PRESCALER_128
    204            * @param   TIM4_PSCReloadMode specifies the TIM4 Prescaler Reload mode.
    205            * This parameter can be one of the following values
    206            *                       - TIM4_PSCRELOADMODE_IMMEDIATE: The Prescaler is loaded
    207            *                         immediatly.
    208            *                       - TIM4_PSCRELOADMODE_UPDATE: The Prescaler is loaded at
    209            *                         the update event.
    210            * @retval None
    211            */

   \                                 In section .far_func.text, align 1
    212          void TIM4_PrescalerConfig(TIM4_Prescaler_TypeDef Prescaler, TIM4_PSCReloadMode_TypeDef TIM4_PSCReloadMode)
    213          {
   \                     TIM4_PrescalerConfig:
   \   000000 8D000000              CALLF     L:?push_w4
   \   000004 B700                  LD        S:?b9, A
   \   000006 450000                MOV       S:?b8, S:?b0
    214              /* Check the parameters */
    215              assert_param(IS_TIM4_PRESCALER_RELOAD_OK(TIM4_PSCReloadMode));
   \   000009 3D00                  TNZ       S:?b8
   \   00000B 270D                  JREQ      L:??CrossCallReturnLabel_8
   \   00000D B600                  LD        A, S:?b8
   \   00000F A101                  CP        A, #0x1
   \   000011 2707                  JREQ      L:??CrossCallReturnLabel_8
   \   000013 AE00D7                LDW       X, #0xd7
   \   000016 8D000000              CALLF     ?Subroutine0
    216              assert_param(IS_TIM4_PRESCALER_OK(Prescaler));
   \                     ??CrossCallReturnLabel_8:
   \   00001A 3D00                  TNZ       S:?b9
   \   00001C 2725                  JREQ      L:??CrossCallReturnLabel_7
   \   00001E B600                  LD        A, S:?b9
   \   000020 A101                  CP        A, #0x1
   \   000022 271F                  JREQ      L:??CrossCallReturnLabel_7
   \   000024 A102                  CP        A, #0x2
   \   000026 271B                  JREQ      L:??CrossCallReturnLabel_7
   \   000028 A103                  CP        A, #0x3
   \   00002A 2717                  JREQ      L:??CrossCallReturnLabel_7
   \   00002C A104                  CP        A, #0x4
   \   00002E 2713                  JREQ      L:??CrossCallReturnLabel_7
   \   000030 A105                  CP        A, #0x5
   \   000032 270F                  JREQ      L:??CrossCallReturnLabel_7
   \   000034 A106                  CP        A, #0x6
   \   000036 270B                  JREQ      L:??CrossCallReturnLabel_7
   \   000038 A107                  CP        A, #0x7
   \   00003A 2707                  JREQ      L:??CrossCallReturnLabel_7
   \   00003C AE00D8                LDW       X, #0xd8
   \   00003F 8D000000              CALLF     ?Subroutine0
    217          
    218              /* Set the Prescaler value */
    219              TIM4->PSCR = (uint8_t)Prescaler;
   \                     ??CrossCallReturnLabel_7:
   \   000043 B600                  LD        A, S:?b9
   \   000045 C75345                LD        L:0x5345, A
    220          
    221              /* Set or reset the UG Bit */
    222              TIM4->EGR = (uint8_t)TIM4_PSCReloadMode;
   \   000048 B600                  LD        A, S:?b8
   \   00004A C75343                LD        L:0x5343, A
    223          }
   \   00004D AC000000              JPF       L:?epilogue_w4
    224          
    225          /**
    226            * @brief  Enables or disables TIM4 peripheral Preload register on ARR.
    227            * @param   NewState new state of the TIM4 peripheral Preload register.
    228            * This parameter can be ENABLE or DISABLE.
    229            * @retval None
    230            */

   \                                 In section .far_func.text, align 1
    231          void TIM4_ARRPreloadConfig(FunctionalState NewState)
    232          {
    233              /* Check the parameters */
    234              assert_param(IS_FUNCTIONALSTATE_OK(NewState));
   \                     TIM4_ARRPreloadConfig:
   \   000000 4D                    TNZ       A
   \   000001 2710                  JREQ      L:??TIM4_ARRPreloadConfig_0
   \   000003 A101                  CP        A, #0x1
   \   000005 2707                  JREQ      L:??CrossCallReturnLabel_9
   \   000007 AE00EA                LDW       X, #0xea
   \   00000A 8D000000              CALLF     ?Subroutine0
    235          
    236              /* Set or Reset the ARPE Bit */
    237              if (NewState != DISABLE)
    238              {
    239                  TIM4->CR1 |= TIM4_CR1_ARPE;
   \                     ??CrossCallReturnLabel_9:
   \   00000E 721E5340              BSET      L:0x5340, #0x7
   \   000012 87                    RETF
    240              }
    241              else
    242              {
    243                  TIM4->CR1 &= (uint8_t)(~TIM4_CR1_ARPE);
   \                     ??TIM4_ARRPreloadConfig_0:
   \   000013 721F5340              BRES      L:0x5340, #0x7
    244              }
    245          }
   \   000017 87                    RETF
    246          
    247          /**
    248            * @brief  Configures the TIM4 event to be generated by software.
    249            * @param   TIM4_EventSource specifies the event source.
    250            * This parameter can be one of the following values:
    251            *                       - TIM4_EVENTSOURCE_UPDATE: TIM4 update Event source
    252            * @retval None
    253            */

   \                                 In section .far_func.text, align 1
    254          void TIM4_GenerateEvent(TIM4_EventSource_TypeDef TIM4_EventSource)
    255          {
   \                     TIM4_GenerateEvent:
   \   000000 3B0000                PUSH      S:?b8
   \   000003 B700                  LD        S:?b8, A
    256              /* Check the parameters */
    257              assert_param(IS_TIM4_EVENT_SOURCE_OK(TIM4_EventSource));
   \   000005 A101                  CP        A, #0x1
   \   000007 2707                  JREQ      L:??CrossCallReturnLabel_10
   \   000009 AE0101                LDW       X, #0x101
   \   00000C 8D000000              CALLF     ?Subroutine0
    258          
    259              /* Set the event sources */
    260              TIM4->EGR = (uint8_t)(TIM4_EventSource);
   \                     ??CrossCallReturnLabel_10:
   \   000010 B600                  LD        A, S:?b8
   \   000012 C75343                LD        L:0x5343, A
    261          }
   \   000015 320000                POP       S:?b8
   \   000018 87                    RETF
    262          
    263          
    264          /**
    265            * @brief  Sets the TIM4 Counter Register value.
    266            * @param   Counter specifies the Counter register new value.
    267            * This parameter is between 0x00 and 0xFF.
    268            * @retval None
    269            */

   \                                 In section .far_func.text, align 1
    270          void TIM4_SetCounter(uint8_t Counter)
    271          {
    272              /* Set the Counter Register value */
    273              TIM4->CNTR = (uint8_t)(Counter);
   \                     TIM4_SetCounter:
   \   000000 C75344                LD        L:0x5344, A
    274          }
   \   000003 87                    RETF
    275          
    276          
    277          /**
    278            * @brief  Sets the TIM4 Autoreload Register value.
    279            * @param   Autoreload specifies the Autoreload register new value.
    280            * This parameter is between 0x00 and 0xFF.
    281            * @retval None
    282            */

   \                                 In section .far_func.text, align 1
    283          void TIM4_SetAutoreload(uint8_t Autoreload)
    284          {
    285              /* Set the Autoreload Register value */
    286              TIM4->ARR = (uint8_t)(Autoreload);
   \                     TIM4_SetAutoreload:
   \   000000 C75346                LD        L:0x5346, A
    287          }
   \   000003 87                    RETF
    288          
    289          /**
    290            * @brief  Gets the TIM4 Counter value.
    291            * @param  None
    292            * @retval Counter Register value.
    293            */

   \                                 In section .far_func.text, align 1
    294          uint8_t TIM4_GetCounter(void)
    295          {
    296              /* Get the Counter Register value */
    297              return (uint8_t)(TIM4->CNTR);
   \                     TIM4_GetCounter:
   \   000000 C65344                LD        A, L:0x5344
   \   000003 87                    RETF
    298          }
    299          
    300          /**
    301            * @brief  Gets the TIM4 Prescaler value.
    302            * @param  None
    303            * @retval Prescaler Register configuration value.
    304            */

   \                                 In section .far_func.text, align 1
    305          TIM4_Prescaler_TypeDef TIM4_GetPrescaler(void)
    306          {
    307              /* Get the Prescaler Register value */
    308              return (TIM4_Prescaler_TypeDef)(TIM4->PSCR);
   \                     TIM4_GetPrescaler:
   \   000000 C65345                LD        A, L:0x5345
   \   000003 87                    RETF
    309          }
    310          
    311          /**
    312            * @brief  Checks whether the specified TIM4 flag is set or not.
    313            * @param   TIM4_FLAG specifies the flag to check.
    314            * This parameter can be one of the following values:
    315            *                       - TIM4_FLAG_UPDATE: TIM4 update Flag
    316            * @retval FlagStatus The new state of TIM4_FLAG (SET or RESET).
    317            */

   \                                 In section .far_func.text, align 1
    318          FlagStatus TIM4_GetFlagStatus(TIM4_FLAG_TypeDef TIM4_FLAG)
    319          {
   \                     TIM4_GetFlagStatus:
   \   000000 3B0000                PUSH      S:?b8
   \   000003 B700                  LD        S:?b8, A
    320              FlagStatus bitstatus = RESET;
    321            
    322              /* Check the parameters */
    323              assert_param(IS_TIM4_GET_FLAG_OK(TIM4_FLAG));
   \   000005 A101                  CP        A, #0x1
   \   000007 2707                  JREQ      L:??CrossCallReturnLabel_11
   \   000009 AE0143                LDW       X, #0x143
   \   00000C 8D000000              CALLF     ?Subroutine0
    324          
    325            if ((TIM4->SR1 & (uint8_t)TIM4_FLAG)  != 0)
   \                     ??CrossCallReturnLabel_11:
   \   000010 B600                  LD        A, S:?b8
   \   000012 C55342                BCP       A, L:0x5342
   \   000015 2704                  JREQ      L:??TIM4_GetFlagStatus_0
    326            {
    327              bitstatus = SET;
   \   000017 A601                  LD        A, #0x1
   \   000019 2001                  JRA       L:??TIM4_GetFlagStatus_1
    328            }
    329            else
    330            {
    331              bitstatus = RESET;
   \                     ??TIM4_GetFlagStatus_0:
   \   00001B 4F                    CLR       A
    332            }
    333            return ((FlagStatus)bitstatus);
   \                     ??TIM4_GetFlagStatus_1:
   \   00001C 320000                POP       S:?b8
   \   00001F 87                    RETF
    334          }
    335          
    336          /**
    337            * @brief  Clears the TIM4’s pending flags.
    338            * @param   TIM4_FLAG specifies the flag to clear.
    339            * This parameter can be one of the following values:
    340            *                       - TIM4_FLAG_UPDATE: TIM4 update Flag
    341            * @retval None.
    342            */

   \                                 In section .far_func.text, align 1
    343          void TIM4_ClearFlag(TIM4_FLAG_TypeDef TIM4_FLAG)
    344          {
   \                     TIM4_ClearFlag:
   \   000000 3B0000                PUSH      S:?b8
   \   000003 B700                  LD        S:?b8, A
    345              /* Check the parameters */
    346              assert_param(IS_TIM4_GET_FLAG_OK(TIM4_FLAG));
   \   000005 A101                  CP        A, #0x1
   \   000007 2707                  JREQ      L:??CrossCallReturnLabel_12
   \   000009 AE015A                LDW       X, #0x15a
   \   00000C 8D000000              CALLF     ?Subroutine0
    347          
    348              /* Clear the flags (rc_w0) clear this bit by writing 0. Writing ‘1’ has no effect*/
    349              TIM4->SR1 = (uint8_t)(~TIM4_FLAG);
   \                     ??CrossCallReturnLabel_12:
   \   000010 3300                  CPL       S:?b8
   \   000012 B600                  LD        A, S:?b8
   \   000014 C75342                LD        L:0x5342, A
    350          
    351          }
   \   000017 320000                POP       S:?b8
   \   00001A 87                    RETF
    352          /**
    353            * @brief  Checks whether the TIM4 interrupt has occurred or not.
    354            * @param   TIM4_IT specifies the TIM4 interrupt source to check.
    355            * This parameter can be one of the following values:
    356            *                       - TIM4_IT_UPDATE: TIM4 update Interrupt source
    357            * @retval ITStatus The new state of the TIM4_IT (SET or RESET).
    358            */
    359          

   \                                 In section .far_func.text, align 1
    360          ITStatus TIM4_GetITStatus(TIM4_IT_TypeDef TIM4_IT)
    361          {
   \                     TIM4_GetITStatus:
   \   000000 3B0000                PUSH      S:?b8
   \   000003 B700                  LD        S:?b8, A
    362              ITStatus bitstatus = RESET;
    363          
    364            uint8_t itstatus = 0x0, itenable = 0x0;
    365          
    366            /* Check the parameters */
    367            assert_param(IS_TIM4_IT_OK(TIM4_IT));
   \   000005 A101                  CP        A, #0x1
   \   000007 2707                  JREQ      L:??CrossCallReturnLabel_13
   \   000009 AE016F                LDW       X, #0x16f
   \   00000C 8D000000              CALLF     ?Subroutine0
    368          
    369            itstatus = (uint8_t)(TIM4->SR1 & (uint8_t)TIM4_IT);
   \                     ??CrossCallReturnLabel_13:
   \   000010 C65342                LD        A, L:0x5342
   \   000013 B700                  LD        S:?b1, A
    370          
    371            itenable = (uint8_t)(TIM4->IER & (uint8_t)TIM4_IT);
   \   000015 B600                  LD        A, S:?b8
   \   000017 C45341                AND       A, L:0x5341
   \   00001A B700                  LD        S:?b0, A
    372          
    373            if ((itstatus != (uint8_t)RESET ) && (itenable != (uint8_t)RESET ))
   \   00001C B600                  LD        A, S:?b8
   \   00001E B500                  BCP       A, S:?b1
   \   000020 2708                  JREQ      L:??TIM4_GetITStatus_0
   \   000022 3D00                  TNZ       S:?b0
   \   000024 2704                  JREQ      L:??TIM4_GetITStatus_0
    374            {
    375              bitstatus = (ITStatus)SET;
   \   000026 A601                  LD        A, #0x1
   \   000028 2001                  JRA       L:??TIM4_GetITStatus_1
    376            }
    377            else
    378            {
    379              bitstatus = (ITStatus)RESET;
   \                     ??TIM4_GetITStatus_0:
   \   00002A 4F                    CLR       A
    380            }
    381            return ((ITStatus)bitstatus);
   \                     ??TIM4_GetITStatus_1:
   \   00002B 320000                POP       S:?b8
   \   00002E 87                    RETF
    382          }
    383          
    384          /**
    385            * @brief  Clears the TIM4's interrupt pending bits.
    386            * @param   TIM4_IT specifies the pending bit to clear.
    387            * This parameter can be one of the following values:
    388            *                       - TIM4_IT_UPDATE: TIM4 update Interrupt source
    389            * @retval None.
    390            */

   \                                 In section .far_func.text, align 1
    391          void TIM4_ClearITPendingBit(TIM4_IT_TypeDef TIM4_IT)
    392          {
   \                     TIM4_ClearITPendingBit:
   \   000000 3B0000                PUSH      S:?b8
   \   000003 B700                  LD        S:?b8, A
    393              /* Check the parameters */
    394              assert_param(IS_TIM4_IT_OK(TIM4_IT));
   \   000005 A101                  CP        A, #0x1
   \   000007 2707                  JREQ      L:??CrossCallReturnLabel_14
   \   000009 AE018A                LDW       X, #0x18a
   \   00000C 8D000000              CALLF     ?Subroutine0
    395          
    396              /* Clear the IT pending Bit */
    397              TIM4->SR1 = (uint8_t)(~TIM4_IT);
   \                     ??CrossCallReturnLabel_14:
   \   000010 3300                  CPL       S:?b8
   \   000012 B600                  LD        A, S:?b8
   \   000014 C75342                LD        L:0x5342, A
    398          }
   \   000017 320000                POP       S:?b8
   \   00001A 87                    RETF

   \                                 In section .near.rodata, align 1
   \                     `?<Constant "C:\\\\Documents and Sett...">`:
   \   000000 433A5C446F63          DC8 43H, 3AH, 5CH, 44H, 6FH, 63H, 75H, 6DH
   \   000008 656E74732061          DC8 65H, 6EH, 74H, 73H, 20H, 61H, 6EH, 64H
   \   000010 205365747469          DC8 20H, 53H, 65H, 74H, 74H, 69H, 6EH, 67H
   \   000018 735C41646D69          DC8 73H, 5CH, 41H, 64H, 6DH, 69H, 6EH, 69H
   \   000020 73747261746F          DC8 73H, 74H, 72H, 61H, 74H, 6FH, 72H, 5CH
   \   000028 4465736B746F          DC8 44H, 65H, 73H, 6BH, 74H, 6FH, 70H, 5CH
   \   000030 73746D387331          DC8 73H, 74H, 6DH, 38H, 73H, 31H, 30H, 35H
   \   000038 6B2D636F6E74          DC8 6BH, 2DH, 63H, 6FH, 6EH, 74H, 72H, 6FH
   \   000040 6C6C65725C4C          DC8 6CH, 6CH, 65H, 72H, 5CH, 4CH, 69H, 62H
   \   000048 726172696573          DC8 72H, 61H, 72H, 69H, 65H, 73H, 5CH, 53H
   \   000050 544D38535F53          DC8 54H, 4DH, 38H, 53H, 5FH, 53H, 74H, 64H
   \   000058 506572697068          DC8 50H, 65H, 72H, 69H, 70H, 68H, 5FH, 44H
   \   000060 72697665725C          DC8 72H, 69H, 76H, 65H, 72H, 5CH, 73H, 72H
   \   000068 635C73746D38          DC8 63H, 5CH, 73H, 74H, 6DH, 38H, 73H, 5FH
   \   000070 74696D342E63          DC8 74H, 69H, 6DH, 34H, 2EH, 63H, 0
    399          
    400          /**
    401            * @}
    402            */
    403            
    404            /**
    405            * @}
    406            */
    407            
    408          /******************* (C) COPYRIGHT 2011 STMicroelectronics *****END OF FILE****/

   Section sizes:

     Function/Label                          Bytes
     --------------                          -----
     TIM4_DeInit                               25
     ?Subroutine0                              12
     TIM4_TimeBaseInit                         60
     TIM4_Cmd                                  24
     TIM4_ITConfig                             58
     TIM4_UpdateDisableConfig                  24
     TIM4_UpdateRequestConfig                  24
     TIM4_SelectOnePulseMode                   24
     TIM4_PrescalerConfig                      81
     TIM4_ARRPreloadConfig                     24
     TIM4_GenerateEvent                        25
     TIM4_SetCounter                            4
     TIM4_SetAutoreload                         4
     TIM4_GetCounter                            4
     TIM4_GetPrescaler                          4
     TIM4_GetFlagStatus                        32
     TIM4_ClearFlag                            27
     TIM4_GetITStatus                          47
     TIM4_ClearITPendingBit                    27
     ?<Constant "C:\\Documents and Sett...">  119

 
 530 bytes in section .far_func.text
 119 bytes in section .near.rodata
 
 530 bytes of CODE  memory
 119 bytes of CONST memory

Errors: none
Warnings: none
